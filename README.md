# Руководство редактора

## 1) Как устроен проект

* Сайт построен на **Hugo**.
* Основной контент лежит в папке **`content/`**:

  * `content/posts/` — **Новости** (попадают в ленту на главной).
  * `content/uchastnikam/` — раздел «Участникам».
  * `content/for_parents/` — раздел «Родителям».
  * (другие разделы по аналогии).
* Статические файлы (картинки и т.п.) — **`static/`**
  Например: `static/img/…` доступны по адресу `/img/…`.

### `_index.md` vs `index.md`

* **`_index.md`** — файл **раздела** (section). Делает папку разделом и включает её в меню/списки.
* **`index.md`** — **страница-бандл** (leaf bundle). Это **одна страница** в своей папке (удобно хранить её картинки рядом).

---

## 2) Параметры страниц (front-matter) и что они делают

Общие параметры (для страниц и постов):

```yaml
---
title: "Заголовок"                  # показывается в меню/на странице
date: 2025-09-03T10:00:00+03:00     # дата материала
publishDate: 2025-09-03T10:00:00+03:00  # дата публикации (можно планировать в будущее)
draft: false                         # черновик (true = не публикуется)
author: "Имя автора"
excerpt: "Краткое описание для списков"   # используется в списках/лентах
cover: "/img/cover.jpg"             # обложка (на странице/в ленте)
category: "Категория"               # метка рядом с датой (для новостей)
weight: 10                          # порядок внутри раздела (меньше → выше)
menu_exclude: false                 # true — скрыть пункт из меню
hideOnHome: false                   # true — скрыть пункт только на главной
---
```

## 3) Как создать **новость** (попадает в ленту)

1. Создай файл в `content/posts/`:

   * Быстро: `content/posts/novost.md`
   * Рекомендовано (бандл с картинками):

     ```
     content/posts/novost-11-09/
       index.md
       cover.jpg
       photo1.jpg
     ```
2. Заполни фронт-маттер (пример):

```markdown
---
title: "Видеоконференция 11 сентября"
date: 2025-09-03T10:00:00+03:00
publishDate: 2025-09-03T10:00:00+03:00
draft: false
author: "Команда олимпиады"
excerpt: "Оргвстреча по олимпиаде."
cover: "/img/uploads/vks.jpg"   # или просто "cover.jpg" если файл лежит рядом (в бандле)
category: "Организационный момент"
---
Текст новости…

- Можно вставлять картинки: `![подпись](/img/uploads/filename.jpg)`
- Или, если это бандл, просто: `![подпись](photo1.jpg)`
```

**Лента**: главная страница показывает последние новости **только из `content/posts/`**.
Новость появится, если `draft: false` и `publishDate` не в будущем.

---

## 4) Как создать **страницу раздела** («Участникам», «Родителям», «Контакты», …)

### Вариант A — простая страница в разделе

```
content/uchastnikam/
  _index.md              # сам раздел
  reglament.md           # ваша страница
```

`reglament.md` (пример):

```markdown
---
title: "Регламент"
draft: false
weight: 10
excerpt: "Описание регламента и ссылки на документы."
---
Основной текст страницы…
```

### Вариант B — подраздел (с собственной страницей списка)

```
content/uchastnikam/
  _index.md
  metodika/
    _index.md            # это новый подраздел «Методика»
    file1.md
    file2.md
```

`_index.md` в подразделе даёт **отдельную страницу раздела**, на которой автоматически отобразятся **ссылки на материалы** внутри (мы сделали шаблон «описание + список ссылок»).

---

## 5) Меню: как устроено и как управлять

* Меню строится **автоматически из разделов**:

  * верхний уровень — папки `content/<section>/_index.md`;
  * в выпадающем списке — **подразделы и страницы одного уровня**.
* Порядок задаётся **`weight`** в `_index.md` разделов и в страницах.
* Скрыть пункт меню:
  
  * **для любого раздела/страницы** → `menu_exclude: true` во фронт-маттере.
  * «Скрыть только на главной» → `hideOnHome: true`.
* Раздел **`posts`** («Новости») обычно **скрыт** в шапке (можно открыть, убрав `menu_exclude` в `content/posts/_index.md`).

> Важно: В текущей шапке раскрываются **один–полтора уровня** (раздел → подраздел и список его страниц). Глубже меню специально не уводим, чтобы не разрасталось.

---

## 6) Картинки в статьях

**Простой способ**: скопируйте файл в `static/img/uploads/…` и вставляйте:

```md
![Подпись](/img/uploads/filename.jpg)
```

**Аккуратный способ** (бандл статьи): положите картинку рядом c `index.md` и используйте относительный путь:

```md
![Подпись](photo1.jpg)
```

Для адаптивности у нас есть класс:

```html
<img src="/img/uploads/filename.jpg" alt="..." class="img-adapt">
```

---

## 7) Черновики и расписание публикации

* **Черновик**: `draft: true` — материал не попадёт на сайт.
* **Публикация по расписанию**: укажите будущий `publishDate` — материал появится автоматически в нужный момент.
* Для «снять с публикации» — временно поставьте `draft: true`.

---

## 9) Как добавить/изменить контент через Git

### 1) Забрать последнюю версию

```bash
git pull
```

### 2) Создать/править файлы в `content/…` и `static/img/…`

### 3) Проверить локально (если есть Hugo)

```bash
hugo server -D
# открыть http://localhost:1313
```

### 4) Закоммитить и отправить

```bash
git add .
git commit -m "Добавлена новость про ВКС 11 сентября"
git push
```

> На проде сайт обновится по настроенному деплою (cron/webhook) каждые 5 минут. Если нужен «моментальный» деплой — выполните скрипт деплоя на сервере (если он настроен).

---
